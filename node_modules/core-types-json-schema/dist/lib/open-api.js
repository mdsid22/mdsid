"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.convertOpenApiToCoreTypes = exports.convertCoreTypesToOpenApi = void 0;
const openapi_json_schema_1 = require("openapi-json-schema");
const core_types_to_json_schema_1 = require("./core-types-to-json-schema");
const json_schema_to_core_types_1 = require("./json-schema-to-core-types");
function convertCoreTypesToOpenApi(doc, options) {
    const { data: jsonSchema, ...rest } = (0, core_types_to_json_schema_1.convertCoreTypesToJsonSchema)(doc, options);
    return {
        ...rest,
        data: (0, openapi_json_schema_1.jsonSchemaDocumentToOpenApi)(jsonSchema, options)
    };
}
exports.convertCoreTypesToOpenApi = convertCoreTypesToOpenApi;
function convertOpenApiToCoreTypes(schema) {
    // TODO: Implement JSON AST parsing and a source map separately to
    //       the tree (src path -> target path)
    schema = typeof schema === 'string' ? JSON.parse(schema) : schema;
    const jsonSchema = (0, openapi_json_schema_1.openApiToJsonSchema)(schema);
    return (0, json_schema_to_core_types_1.convertJsonSchemaToCoreTypes)(jsonSchema);
}
exports.convertOpenApiToCoreTypes = convertOpenApiToCoreTypes;
