"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatError = exports.formatCoreTypesError = void 0;
const code_frame_1 = require("@babel/code-frame");
const core_types_1 = require("core-types");
function formatCoreTypesError(err) {
    if ((0, core_types_1.isCoreTypesError)(err)) {
        const message = `[${err.name}] ${err.message}`;
        return formatError(message, err);
    }
    return err.message;
}
exports.formatCoreTypesError = formatCoreTypesError;
function formatError(message, meta) {
    var _a;
    if (((_a = meta === null || meta === void 0 ? void 0 : meta.loc) === null || _a === void 0 ? void 0 : _a.start) && (meta === null || meta === void 0 ? void 0 : meta.source)) {
        const loc = (0, core_types_1.locationToLineColumn)(meta.source, meta.loc);
        const { start, end } = loc;
        if (start)
            return (0, code_frame_1.codeFrameColumns)(meta.source, { start, end }, { message });
    }
    return message;
}
exports.formatError = formatError;
